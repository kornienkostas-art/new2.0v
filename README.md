# УссурОЧки.рф — Desktop-приложение

Кроссплатформенное приложение для ведения заказов контактных линз: МКЛ (плоская модель) и «Меридиан» (заказ-«шапка» с позициями).

Стек:
- Python 3.10+
- PySide6 (Qt) — нативный UI, системный трей, модальные формы, таблицы.
- SQLite — локальная БД `data.db` рядом с приложением.
- JSON конфигурация `settings.json` (создаётся автоматически).

Фичи первой версии:
- Экраны: Главное меню, Заказы МКЛ (CRUD, смена статуса, цветовые метки), Заказы «Меридиан» (CRUD позиций, смена статуса), Клиенты, Товары (МКЛ/Меридиан), Настройки.
- Маска телефона в таблицах: «+7-XXX-XXX-XX-XX»/«8-XXX-XXX-XX-XX».
- Экспорт TXT для МКЛ и «Меридиан» по группам товаров с авто-открытием файла.
- Системный трей (Windows/macOS/Linux) с меню «Открыть», «Автозапуск» (Windows), «Выход».
- Уведомления: «Меридиан» по дням/времени; «МКЛ» по просроченности c отложить и массовым «Заказан».
- Настройки: масштаб, размер шрифта, путь экспорта, трей, автозапуск (Windows), звук уведомлений.

Запуск в разработке:
1. Установить зависимости:
   ```
   pip install -r requirements.txt
   ```
2. Запуск:
   ```
   python main.py
   ```

Сборка под Windows (пример через PyInstaller):
```
pip install pyinstaller
pyinstaller --noconsole --onefile --name UssurOchkiRF main.py
```
После сборки `settings.json` и `data.db` будут созданы рядом с исполняемым файлом при первом запуске.

Настройки (settings.json):
- Создаются автоматически, недостающие ключи дополняются дефолтами.
- Сохранение атомарное (через временный файл и replace).
- Применяются без перезапуска для UI и автозапуска (Windows).

Замечания:
- Если библиотека трея недоступна, приложение работает без трея.
- Иконка трея: попытка подобрать системную, иначе placeholder.
- Звук уведомлений: на Windows — системные алиасы или WAV; на других ОС — системный «beep».

Дальнейшая работа:
- Улучшение дизайна (кастомные QSS темы, анимации fade, логотипы).
- Точные восстановление геометрии окна из `main_geometry`.
- Модульные тесты (формат телефона, валидации полей, логика уведомлений, формат экспорта).